<html>
<head>
<title>首页</title>
<meta charset="utf-8">
<link rel="stylesheet" type="text/css" href="public/css/dashboard.css">
<link rel="stylesheet" type="text/css" href="public/css/main.css">
<script type="text/javascript" src="lib/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="lib/jquery.slides.js"></script>
<script type="text/javascript" src="public/js/dashboard.js"></script>
<script type="text/javascript" src="public/js/SunAndWr.js"></script>
<script type="text/javascript" src="public/js/Highcharts.js"></script>
</head>
<body>
<div class="header">
	<span>阿里巴巴淘宝城 &nbsp;|&nbsp; LIGHT能效管理系统</span>
	<div class="login"><span>请登录</span></div>
</div>
<div class="main">
	<div class="left_bar">
		<div class="title">
			<div class="block"></div>
			<div class="title_name">建筑动态</div>
		</div>
		<div class="video"></div>
		<div class="chart_group">
		<script type="text/javascript" src="public/js/getCharts.js"></script>
		<script type="text/javascript">
			$(function(){
				var categories=['7月1日','7月2日','7月3日','7月4日','7月5日','7月6日','7月7日'];
				var data=[12, 24, 26, 18, 20, 22, 24];
				//参数       图表ID|图表类型|背景色|高|边角弧度|底部高|x轴标签|数据|数据名|单位|点的填充色
				getHicharts("visitor","line","#A5BA51",130,3,10,categories,data,'访客','人次',"#A5BA51");
				var categories1=['7:00','8:00','9:00','10:00','11:00','12:00','13:00','14:00','15:00','16:00','17:00','18:00'];
				var data1=[15, 17, 18, 19, 20, 22, 24,23,22,22,20,18];
				getHicharts("temperature","line","#0D0502",100,0,22,categories1,data1,'冷热量','℃',"#0D0502");
				var categories2=['7:00','8:00','9:00','10:00','11:00','12:00','13:00','14:00','15:00','16:00','17:00','18:00'];
				var data2=[15, 17, 18, 19, 20, 22, 24,23,22,22,20,18];
				getHicharts("indoor_temperature","line","#0E0402",100,0,2,categories2,data2,'温度','℃',"#0E0402");
				var categories3=['a','b','c','d','e','f','g'];
				var data3=[null, 286, 276, {y:256,color:"#909BBB"}, 300, 240, null];
				getHicharts("buildings","column","#030504",120,0,22,categories3,data3,'能耗','kWh/m²a',"#030504");
			});
		</script>
			<div class="left_charts_group">
				<div class="customer">
					<div class="chart_title">访客</div>
					<div id="visitor"></div>
					<div class="data">
						<p>6月25日 星期二</p>
						<p class="people"><span class="people_count specially_font">45,325</span><span>人</span></p>
					</div>
				</div>
				<div class="map">
					<div><img src="public/images/zgg_map.png"/></div>
					<div class="data">
						<p class="build_name">中国馆</p>
						<p class="location">上海浦东新区</p>
					</div>
				</div>
			</div> 
			<div class="right_charts_group">
				<div>
					<p>冷热量变化</p>
					<div class="chart" id="temperature"></div>
				</div>
				<div>
					<p>室内温度变化</p>
					<div class="chart" id="indoor_temperature"></div>
				</div>
				<div>
					<p>同类建筑对比</p>
					<div class="chart" id="buildings"></div>
				</div>
				<div class="data">
					<p class="describe">能耗参考值</p>
					<p class="para"><span class="specially_font">256</span><span>kWh/m<sup>2</sup>a</span></p>
				</div>
			</div>
		</div>	
	</div>
	<div class="middle_bar">
		<div class="title">
			<div class="block"></div>
			<div class="title_name">能源使用</div>
		</div>
		<div class="carousel">
			
			<div id="carousel_content">
				<div id="slides">
					<div class="btn left_btn slidesjs-previous slidesjs-navigation"></div>
					<div class="display_para">
						<span class="energy_title">总能耗</span>
						<div class="division_line_2"></div>
						<span class="energy_number specially_font">2,768,528,123<span class="unit">kWh</span></span>
					</div>
					<div class="display_para">
						<span class="energy_title">总水耗</span>
						<div class="division_line_2"></div>
						<span class="energy_number specially_font">2,768,528,123<span class="unit">ton</span></span>
					</div>
					<div class="display_para">
						<span class="energy_title">总气耗</span>
						<div class="division_line_2"></div>
						<span class="energy_number specially_font">2,768,528,123<span class="unit">m³</span></span>
					</div>
					<div class="btn right_btn slidesjs-next slidesjs-navigation"></div>
				</div>
			</div>
			
		</div>
		<script src="http://weather.1616.net/grab/weather/%25E5%258C%2597%25E4%25BA%25AC.js"></script>
		<script src="public/js/mixcharts.js"></script>
				<script type="text/javascript">
					$(function(){
					//空调、照明及办公系统用电数据填写
					/*
					参数(图表块ID（不变）,饼图数1,饼图数2,饼图数据1名称,饼图数据1颜色,昨日总数,今日总数,昨日实际,今日实际)
					*/
						getWeatherData();
						getMixCharts("highchart1",50,100,'空调系统',"#F34B3E",150,160,100,110);
						getMixCharts("highchart2",20,100,'照明系统',"#46AFDE",140,150,110,120);
						getMixCharts("highchart3",30,100,'办公设备',"#A8BE51",145,155,100,115);
					});
					function getWeatherData(){
						$.ajax({
							url:"http://api.wunderground.com/api/f460985732f3eaa1/forecast10day/lang:CN/q/China/BeiJing.json",   
							dataType:"jsonp",
							success:function(data){
								var weatherData=data.forecast.simpleforecast.forecastday;
								$(".weather_describe i").css({"background":"url('"+weatherData[0].icon_url+"')","background-position":"center","background-repeat":"no-repeat","width":"67px","height":"45px"});
								$(".weather_describe>span").html(weatherData[0].conditions);
								//$(".maxmin").siblings("h1").html(weatherData[0].);
								$(".wind_data div>p:eq(0)").html(weatherData[0].avewind.dir+"风");
								$(".maxmin>span:eq(0)").html(weatherData[0].high.celsius+"°&nbsp;&nbsp;&nbsp;&nbsp;");
								$(".maxmin>span:eq(1)").html(weatherData[0].low.celsius+"°");
								for(var i=0;i<6;i++){
									$(".next_weather tr:eq("+i+")>td:eq(0)").html(weatherData[i+1].date.weekday);
									$(".next_weather tr:eq("+i+")>td:eq(1) img").attr({'src':weatherData[i+1].icon_url,'width':'20px','height':'20px'});
									$(".next_weather tr:eq("+i+")>td:eq(2)").html(weatherData[i+1].high.celsius+"°");
									$(".next_weather tr:eq("+i+")>td:eq(3)").html(weatherData[i+1].low.celsius+"°");
								}								
							},error:function(){
								console.log('error');
							}
						})
					};
					window.setInterval(function(){getWeatherData();},300000);
				</script>
		<div class="charts_group_2">
			<div>
				<div class="top_chart">
				<script src="public/js/circle.js"></script>
				<script type="text/javascript"><!-- ,"#66E3FF","#46AFDE","#BDD170","#A5BC47" -->
					$(function(){
						var elec0=2410512;//初始化加载
						var elec1=1200012;
						var water0=12105;
						var water1=11000;
						var gas0=27264;
						var gas1=14569;
						
						$(".total_consume:eq(0)").find("h1").html(elec0.toLocaleString());//初始赋值
						$(".total_consume:eq(1)").find("h1").html(water0.toLocaleString());
						$(".total_consume:eq(2)").find("h1").html(gas0.toLocaleString());
						$("#elec h1").html(elec1.toLocaleString());
						$("#water h1").html(water1.toLocaleString());
						$("#gas h1").html(gas1.toLocaleString());
						//初始化圆
						getCircles("canvas1","canvas2","canvas3",elec0,elec1,"#FA7F44","#B86E4B",
							   "canvas4","canvas5","canvas6",water0,water1,"#66E3FF","#46AFDE",
							   "canvas7","canvas8","canvas9",gas0,gas1,"#BDD170","#A5BC47");	
					});
					var elec2=1700100;//从后台得到实时数据
					var water2=11400;
					var gas2=14800;
					function dizneng(elec2,water2,gas2){
						var elec=$("#elec h1").html().replace(/,/g,"");//得到基数
						var water=$("#water h1").html().replace(/,/g,"");
						var gas=$("#gas h1").html().replace(/,/g,"");
						dataIncre(elec2-elec,water2-water,gas2-gas);//画图
						$("#elec h1").html(elec2.toLocaleString());//数据填充
						$("#water h1").html(water2.toLocaleString());
						$("#gas h1").html(gas2.toLocaleString());
					}
					window.setInterval(function(){dizneng(elec2,water2,gas2);},3000);
				</script>
					<div id="elec" class="chart" style="background-color:#E9EAED;">
						<h3 style="position: absolute;left: 76px;top: 40px;color:#C0C0C0;">今日用电量</h3>
						<h1 class="specially_font" style="position: absolute;left: 80px;top: 69px;color:#E37743"></h1>
						<h4 style="position: absolute;right: 80px;top: 102px;color:#E37743">kWh</h4>
						<img style="position: absolute;right: 115px;top: 145px" src="public/images/ele_amount.png"></img>
						<canvas id="canvas1" width="200" height="180" style="border:0px;position: absolute;left: 24px;top: 0"></canvas>
						<canvas id="canvas2" width="200" height="180" style="border:0px;position: absolute;left: 24px;top: 0"></canvas>
						<canvas id="canvas3" width="200" height="180" style="border:0px;position: absolute;left: 24px;top: 0"></canvas>
					</div>
					<div class="total_consume">
						<p class="specially_font">up to</p>
						<h1 class="specially_font color_1"></h1>
						<span>累计用电量</span>
					</div>
					<div class="data bg_1">
						<h1>用电量</h1>
						<span>kWh（度）</span>
					</div>
				</div>
				
				<div class="bottom_chart">
					<div class="describe"><span class="what_system">空调系统用电量</span><span class="unit">kWh（度）</span></div>
					<div id="highchart1"></div>
				</div>
			</div>
			<div>
				<div class="top_chart">
					<div id="water" class="chart" style="background-color:#E9EAED;">
						<h3 style="position: absolute;left: 76px;top: 40px;color:#C0C0C0;">今日用水量</h3>
						<h1 class="specially_font" style="position: absolute;left: 80px;top: 69px;color:#5AD0F3"></h1>
						<h4 style="position: absolute;right: 80px;top: 102px;color:#5AD0F3">ton</h4>
						<img style="position: absolute;right: 115px;top: 145px" src="public/images/water_amount.png"></img>
						<canvas id="canvas4" width="200" height="180" style="border:0px;position: absolute;left: 24px;top: 0px"></canvas>
						<canvas id="canvas5" width="200" height="180" style="border:0px;position: absolute;left: 24px;top: 0px"></canvas>
						<canvas id="canvas6" width="200" height="180" style="border:0px;position: absolute;left: 24px;top: 0px"></canvas>
					</div>
					<div class="total_consume">
						<p class="specially_font">up to</p>
						<h1 class="specially_font color_2"></h1>
						<span>累计用水量</span>
					</div>
					<div class="data bg_2">
						<h1>用水量</h1>
						<span>ton（吨）</span>
					</div>
				</div>
				<div class="bottom_chart">
					<div class="describe"><span class="what_system">照明系统用电量</span><span class="unit">kWh（度）</span></div>
					<div id="highchart2"></div>
				</div>
			</div>
			<div class="nomargin">
				<div class="top_chart">
					<div id="gas" class="chart" style="background-color:#E9EAED;">
						<h3 style="position: absolute;left: 76px;top: 40px;color:#C0C0C0;">今日用气量</h3>
						<h1 class="specially_font" style="position: absolute;left: 80px;top: 69px;color:#B5CA63"></h1>
						<h4 style="position: absolute;right: 80px;top: 102px;color:#B5CA63">m³</h4>
						<img style="position: absolute;right: 112px;top: 145px" src="public/images/gas_amount.png"></img>
						<canvas id="canvas7" width="200" height="180" style="border:0px;position: absolute;left: 24px;top: 0px"></canvas>
						<canvas id="canvas8" width="200" height="180" style="border:0px;position: absolute;left: 24px;top: 0px"></canvas>
						<canvas id="canvas9" width="200" height="180" style="border:0px;position: absolute;left: 24px;top: 0px"></canvas>
					</div>
					<div class="total_consume">
						<p class="specially_font">up to</p>
						<h1 class="specially_font color_3"></h1>
						<span>累计用气量</span>
					</div>
					<div class="data bg_3">
						<h1>用气量</h1>
						<span>m³（立方）</span>
					</div>
				</div>
				<div class="bottom_chart">
					<div class="describe"><span class="what_system">办公设备</span><span class="unit">kWh（度）</span></div>
					<div id="highchart3"></div>
				</div>
			</div>
		</div>
		<div class="charts_group_3">
			<div>
				<div class="chart_logo car">
					<h1>碳足迹</h1>
					<i class="icon_car"></i>
					<h2>一辆汽车行驶</h2>
				</div>
				<div class="data">
					<p class="describe">Kilometer</p>
					<p class="para specially_font">30750</p>
				</div>
			</div>
			<div>
				<div class="chart_logo air">
					<i class="icon icon_air"></i>
					<h2>一辆汽车行驶</h2>
				</div>
				<div class="data">
					<p class="describe">Times</p>
					<p class="para specially_font">3.15</p>
				</div>
			</div>
			<div>
				<div class="chart_logo tree">
					<i class="icon icon_tree"></i>
					<h2>一棵大树成长</h2>
				</div>
				<div class="data">
					<p class="describe">Years</p>
					<p class="para specially_font">15</p>
				</div>
			</div>
			<div class="nomargin">
				<div class="chart_logo bulb">
					<i class="icon icon_bulb"></i>
					<h2>一只灯泡点亮</h2>
				</div>
				<div class="data">
					<p class="describe">Hours</p>
					<p class="para specially_font">15,168</p>
				</div>
			</div>
		</div>
	</div>
	<div class="right_bar">
		<div class="title">
			<div class="block"></div>
			<div class="title_name">天气信息</div>
		</div>
		<div class="weather_overview">
			<div class="weather_describe"><i icon="cloud"></i><span style="display:inline"></span></div>
			<div class="maxmin specially_font"><span></span><span></span></div>
			<h1 class="specially_font">22°</h1>
		</div>
		<div class="next_weather">
			<table>
				<tr>
					<td></td>
					<td><img src="public/images/sunshine.png"></td>
					<td></td>
					<td class="min_temp"></td>
				</tr>
				<tr>
					<td></td>
					<td><img src="public/images/sunshine.png"></td>
					<td></td>
					<td class="min_temp"></td>
				</tr>
				<tr>
					<td></td>
					<td><img src="public/images/sunshine.png"></td>
					<td></td>
					<td class="min_temp"></td>
				</tr>
				<tr>
					<td></td>
					<td><img src="public/images/sunshine.png"></td>
					<td></td>
					<td class="min_temp"></td>
				</tr>
				<tr>
					<td></td>
					<td><img src="public/images/sunshine.png"></td>
					<td></td>
					<td class="min_temp"></td>
				</tr>
				<tr>
					<td></td>
					<td><img src="public/images/sunshine.png"></td>
					<td></td>
					<td class="min_temp"></td>
				</tr>
			</table>
		</div>
		<script type="text/javascript">
			$(function(){
				var WRIndex=320;//获取空气污染指数
				var WRdecti;
				$(".pollution_title div:eq(0) span:eq(0)").html(WRIndex);
				if(WRIndex<50){
					WRdecti="优";
				}
				if(WRIndex<100&&WRIndex>=50){
					WRdecti="良";
				}
				if(WRIndex<150&&WRIndex>=100){
					WRdecti="轻度";
				}
				if(WRIndex<200&&WRIndex>=150){
					WRdecti="中度";
				}
				if(WRIndex<300&&WRIndex>=200){
					WRdecti="重度";
				}
				if(WRIndex<500&&WRIndex>=300){
					WRdecti="严重";
				}
				$(".pollution_title div:eq(0) span:eq(1)").html(WRdecti);
				getWRIndex(WRIndex);
			});
		</script>
		<div class="unit_div pollution">
			<div class="unit_title pollution_title">
				<p class="">空气污染指数</p>
				<div><span class="specially_font number">127</span><span class="degree">轻度</span></div>
			</div>
			<div>
				<div class="arrow"></div>
				<img id="wr_bar" src="public/images/wr_bar.png" width="273px"></img>
			</div>
			<div>
				<table style="text-align:center;color:#FFF;position: relative;right: -8px;bottom: -14px;">
				  <tr>
					<td width="39px">50</td>
					<td width="39px">100</td>
					<td width="39px">150</td>
					<td width="39px">200</td>
					<td width="39px">300</td>
					<td width="78px">500</td>
				  </tr>
				  <tr>
					<td>优</td>
					<td>良</td>
					<td>轻度</td>
					<td>中度</td>
					<td>重度</td>
					<td>严重</td>
				  </tr>
				</table>		
			</div>
		</div>
		<div class="unit_div air_speed">
			<div class="unit_title pollution_title">
				<p class="">风速</p>
			</div>
			<div class="wind_data">
				<i class="windmill"></i>
				<div>
					<p>东风&nbsp;&nbsp;2级&nbsp;&nbsp;轻风</p>
					<p>清风拂面较为舒适</p>
				</div>
			</div>
		</div>
		<script type="text/javascript">
			$(function(){
				sunRAS();
			});
			function sunRAS(){
				getSunrise_SunsetTime("6:15","18:10");
			}
		</script>
		<div class="sun_position">
			<div class="unit_title pollution_title">
				<p class="">日出日落时间</p>
			</div>
			<div style="height: 139px;">
				<img id="sun_pic" src="public/images/sun.png">
				<div style="background-color:#4C4F63; width:304px; height:101px;position:relative;top:28px">
					<canvas id="myCanvasTag" width="304" height="100" style=" border:0px;"></canvas>
				</div>
			</div>
		</div>
	</div>
</div>
</body>
</html>